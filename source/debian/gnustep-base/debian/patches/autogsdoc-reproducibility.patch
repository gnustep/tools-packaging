Description: Fix reproducibility issue with autogsdoc
 https://tests.reproducible-builds.org/debian/issues/unstable/user_in_documentation_generated_by_gsdoc_issue.html
Forwarded: not-needed
Author: Yavor Doganov <yavor@gnu.org>
Last-Update: 2018-02-01
---

--- gnustep-base.orig/Tools/AGSOutput.m
+++ gnustep-base/Tools/AGSOutput.m
@@ -75,6 +75,19 @@
   return [set characterIsMember: [t characterAtIndex: [t length] - 1]];
 }
 
+static NSString *
+debuser (void)
+{
+  NSString *user;
+
+  if (getenv("DEB_BUILD_ARCH"))
+    user = @"Debian";
+  else
+    user = NSUserName();
+
+  return user;
+}
+
 /**
  * <unit>
  *  <heading>The AGSOutput class</heading>
@@ -397,7 +410,7 @@
   authors = [info objectForKey: @"authors"];
   if (authors == nil)
     {
-      tmp = [NSString stringWithFormat: @"Generated by %@", NSUserName()];
+      tmp = [NSString stringWithFormat: @"Generated by %@", debuser()];
       [str appendString: @"    <author name=\""];
       [str appendString: tmp];
       [str appendString: @"\"></author>\n"];
@@ -2365,7 +2378,7 @@
 	  [str appendString: @"    <title>"];
 	  [str appendString: kind];
 	  [str appendString: @"</title>\n"];
-	  tmp = [NSString stringWithFormat: @"Generated by %@", NSUserName()];
+	  tmp = [NSString stringWithFormat: @"Generated by %@", debuser()];
 	  [str appendString: @"    <author name=\""];
 	  [str appendString: tmp];
 	  [str appendString: @"\"></author>\n"];
